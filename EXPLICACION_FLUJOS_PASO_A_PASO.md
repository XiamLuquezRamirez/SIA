# üìñ EXPLICACI√ìN COMPLETA - Flujos de Aprobaci√≥n

## üéØ ¬øQu√© es el Sistema de Flujos de Aprobaci√≥n?

Es un sistema que define **por qu√© estados** puede pasar una solicitud y **qui√©n puede moverla** entre esos estados.

## üîÑ Conceptos B√°sicos

### 1. Estados
Son las **etapas** por las que pasa una solicitud:
- üìß **Nueva** (INICIAL) - Cuando se crea
- üë§ **Asignada** (PROCESO) - Cuando se asigna a alguien
- ‚è≥ **En Proceso** (PROCESO) - Cuando se est√° trabajando en ella
- üîç **En Revisi√≥n** (PROCESO) - Cuando se est√° revisando
- ‚úÖ **Aprobada** (FINAL) - Cuando se aprueba
- ‚ùå **Rechazada** (FINAL) - Cuando se rechaza

### 2. Transiciones
Son las **flechas** que conectan estados:
```
Nueva ‚Üí Asignada
Asignada ‚Üí En Proceso
En Proceso ‚Üí En Revisi√≥n
En Revisi√≥n ‚Üí Aprobada
En Revisi√≥n ‚Üí Rechazada
```

### 3. Flujo B√°sico vs Personalizado

**Flujo B√°sico:**
- Usa el flujo est√°ndar del sistema
- No necesita configuraci√≥n
- Aplica a TODOS los tipos de solicitud

**Flujo Personalizado:**
- Creas transiciones espec√≠ficas para ESTE tipo
- Solo para este tipo de solicitud
- Tiene prioridad sobre el flujo b√°sico

## üìã PROCESO COMPLETO - Paso a Paso

### PASO 1: Crear Tipo de Solicitud

```
1. Vas a: Administraci√≥n ‚Üí Configurar Solicitudes
2. Click "‚ûï Nuevo Tipo de Solicitud"
3. Wizard se abre con 4 pasos
4. Est√°s en PASO 1
```

### PASO 2: Completar Informaci√≥n B√°sica

```
En PASO 1 llenas:
‚îú‚îÄ C√≥digo: CERT-NOM-001
‚îú‚îÄ Nombre: Certificado de Nomenclatura
‚îÇ   ‚îî‚îÄ (Slug se genera autom√°ticamente)
‚îú‚îÄ Descripci√≥n: ...
‚îú‚îÄ Categor√≠a: üìÑ Certificados
‚îú‚îÄ √Årea Responsable: Planeaci√≥n
‚îú‚îÄ D√≠as de Respuesta: 5
‚îú‚îÄ D√≠as de Alerta: 2
‚îî‚îÄ Color e Icono

Click "Siguiente ‚Üí"
  ‚Üì
Se GUARDA en base de datos con activo=false (borrador)
  ‚Üì
Recibes un ID (ejemplo: tipoIdCreado = 12)
  ‚Üì
Avanzas al PASO 2
```

### PASO 3: Configurar Flujo (PASO 2 del Wizard)

```
Llegas a PASO 2: "Flujos de Aprobaci√≥n"

Ves 2 opciones:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚óã Flujo B√°sico (Por Defecto)           ‚îÇ
‚îÇ   ‚îî‚îÄ Usa flujo est√°ndar del sistema    ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ ‚óã Flujo Personalizado                  ‚îÇ
‚îÇ   ‚îî‚îÄ Crea transiciones espec√≠ficas     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### Opci√≥n A: Flujo B√°sico (M√°s Simple)

```
1. Dejas seleccionado "Flujo B√°sico"
2. Ves el flujo est√°ndar:
   üìß Nueva ‚Üí üë§ Asignada ‚Üí ‚è≥ En Proceso ‚Üí ‚úÖ Aprobada
3. Click "Siguiente"
4. Listo ‚úÖ
```

#### Opci√≥n B: Flujo Personalizado

```
1. Seleccionas "‚óã Flujo Personalizado"
   ‚Üì
2. Se cargan los ESTADOS del sistema:
   GET /admin/api/configuracion/estados
   ‚Üì
   Respuesta:
   {
     "estados": [
       {id: 1, nombre: "Nueva", tipo: "inicial", ...},
       {id: 2, nombre: "Asignada", tipo: "proceso", ...},
       ...
     ]
   }
   ‚Üì
3. Se muestra el DIAGRAMA con los estados:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ üìä Diagrama de Flujo               ‚îÇ
   ‚îÇ [+ Nueva Transici√≥n]               ‚îÇ
   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
   ‚îÇ                                    ‚îÇ
   ‚îÇ  üìß     üë§      ‚è≥      ‚úÖ          ‚îÇ
   ‚îÇ Nueva  Asignada En Proceso Aprobada‚îÇ
   ‚îÇ                                    ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   
4. Tambi√©n se muestran las transiciones YA CREADAS:
   GET /admin/api/configuracion/flujos-transiciones?tipo_solicitud_id=12
   ‚Üì
   (Por ahora: vac√≠o, es la primera vez)
```

### PASO 4: Crear Primera Transici√≥n

```
1. Click en "‚ûï Nueva Transici√≥n"
   ‚Üì
2. Modal se abre:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ + Nueva Transici√≥n                ‚îÇ
   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
   ‚îÇ                                   ‚îÇ
   ‚îÇ Estado Origen *                   ‚îÇ
   ‚îÇ [Seleccione estado origen ‚ñº]      ‚îÇ
   ‚îÇ                                   ‚îÇ
   ‚îÇ Estado Destino *                  ‚îÇ
   ‚îÇ [Seleccione estado destino ‚ñº]     ‚îÇ
   ‚îÇ                                   ‚îÇ
   ‚îÇ Nombre: _____________________     ‚îÇ
   ‚îÇ Texto bot√≥n: ________________     ‚îÇ
   ‚îÇ Descripci√≥n: ________________     ‚îÇ
   ‚îÇ                                   ‚îÇ
   ‚îÇ üë• Qui√©n Puede Ejecutar           ‚îÇ
   ‚îÇ ‚òê Super Administrador             ‚îÇ
   ‚îÇ ‚òê Director OAPM                   ‚îÇ
   ‚îÇ ‚òê Coordinador del √Årea            ‚îÇ
   ‚îÇ ... (m√°s opciones)                ‚îÇ
   ‚îÇ                                   ‚îÇ
   ‚îÇ ‚öôÔ∏è Condiciones                     ‚îÇ
   ‚îÇ ‚òê Requiere comentario             ‚îÇ
   ‚îÇ ‚òê Requiere documento              ‚îÇ
   ‚îÇ ... (m√°s opciones)                ‚îÇ
   ‚îÇ                                   ‚îÇ
   ‚îÇ ü§ñ Acciones Autom√°ticas            ‚îÇ
   ‚îÇ ‚òê Reasignar funcionario           ‚îÇ
   ‚îÇ ‚òë Enviar notificaciones           ‚îÇ
   ‚îÇ ... (m√°s opciones)                ‚îÇ
   ‚îÇ                                   ‚îÇ
   ‚îÇ [Cancelar] [Crear Transici√≥n]     ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

3. Usuario llena:
   ‚îú‚îÄ Estado Origen: üìß Nueva
   ‚îú‚îÄ Estado Destino: üë§ Asignada
   ‚îú‚îÄ Nombre: "Asignar Solicitud"
   ‚îú‚îÄ Texto bot√≥n: "Asignar"
   ‚îú‚îÄ Roles: [‚òë Director OAPM, ‚òë Coordinador]
   ‚îú‚îÄ Condiciones: [‚òë Requiere comentario]
   ‚îî‚îÄ Acciones: [‚òë Enviar notificaciones]

4. Click "Crear Transici√≥n"
   ‚Üì
5. Se GUARDA en base de datos:
   POST /admin/api/configuracion/flujos-transiciones
   Body: {
     tipo_solicitud_id: 12,
     estado_origen_id: 1,
     estado_destino_id: 2,
     nombre: "Asignar Solicitud",
     roles_permitidos: ["Director OAPM", "Coordinador del √Årea"],
     requiere_comentario: true,
     ...
   }
   ‚Üì
6. Backend valida y crea:
   ‚úì No duplicados
   ‚úì Estados existen
   ‚úì Estados son diferentes
   ‚Üì
7. Respuesta:
   {success: true, message: "Transici√≥n creada"}
   ‚Üì
8. Frontend actualiza:
   ‚îú‚îÄ Modal se cierra
   ‚îú‚îÄ Recarga transiciones
   ‚îú‚îÄ Actualiza diagrama
   ‚îî‚îÄ Muestra en lista
```

### PASO 5: Ver Transici√≥n Creada

```
Ahora en "Transiciones Configuradas" ver√°s:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìã Transiciones Configuradas             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1. Asignar Solicitud                     ‚îÇ
‚îÇ    Nueva ‚Üí Asignada                      ‚îÇ
‚îÇ    [Con condiciones]                     ‚îÇ
‚îÇ    [‚úèÔ∏è Editar] [üóëÔ∏è Eliminar]              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Y en el diagrama:
- El diagrama se actualiza mostrando la conexi√≥n
```

### PASO 6: Crear M√°s Transiciones (Opcional)

```
Puedes crear un flujo completo:

Transici√≥n 1: Nueva ‚Üí Asignada
Transici√≥n 2: Asignada ‚Üí En Proceso
Transici√≥n 3: En Proceso ‚Üí En Revisi√≥n
Transici√≥n 4: En Revisi√≥n ‚Üí Aprobada
Transici√≥n 5: En Revisi√≥n ‚Üí Rechazada

Cada una con sus propios:
- Permisos (qui√©n puede ejecutar)
- Condiciones (qu√© se requiere)
- Acciones (qu√© pasa autom√°ticamente)
```

### PASO 7: Continuar con el Wizard

```
Click "Siguiente ‚Üí"
   ‚Üì
Paso 3 del Wizard
   (siguiente funcionalidad)
```

## üîç DEBUG - Qu√© Verificar

### 1. Abre la Consola (F12)

```javascript
// Cuando llegas al Paso 2 y seleccionas "Flujo Personalizado"
// Deber√≠as ver en consola:

> Cargando estados disponibles...
> Estados recibidos: {success: true, estados: Array(8)}
> Estados guardados en window: 8
> Renderizando diagrama con 8 estados
> Cargando transiciones para tipo: 12
> Transiciones recibidas: {success: true, transiciones: []}
> Total transiciones: 0
```

### 2. Verifica que los Estados se Cargaron

```javascript
// En consola escribe:
window.estadosDisponibles

// Deber√≠as ver:
// Array(8) [{id: 1, nombre: "Nueva", ...}, ...]
```

### 3. Verifica que el Diagrama se Renderiz√≥

```html
<!-- Inspecciona el elemento #diagrama_flujo -->
<!-- Deber√≠a tener HTML con los estados -->
```

## üêõ Soluci√≥n de Problemas

### Problema 1: "No hay estados disponibles"

**Causa:** API no devuelve datos  
**Soluci√≥n:**
```bash
# Verificar que hay datos
php artisan tinker --execute="DB::table('estados_solicitud')->count()"
# Deber√≠a retornar: 8

# Probar endpoint directamente
curl http://localhost:8000/admin/api/configuracion/estados
```

### Problema 2: Modal no se abre

**Causa:** `window.estadosDisponibles` est√° vac√≠o  
**Soluci√≥n:**
```javascript
// En consola (F12):
console.log('Estados:', window.estadosDisponibles);

// Si es undefined o []:
// 1. Verifica que seleccionaste "Flujo Personalizado"
// 2. Verifica que la petici√≥n a /admin/api/configuracion/estados funcione
```

### Problema 3: Diagrama vac√≠o

**Causa:** No se renderiza correctamente  
**Soluci√≥n:**
```javascript
// Forzar renderizado:
renderizarDiagramaFlujo();

// Verificar elemento existe:
console.log(document.getElementById('diagrama_flujo'));
```

## ‚úÖ Checklist de Verificaci√≥n

Antes de hacer clic en "+ Nueva Transici√≥n", verifica:

```
‚òë Paso 1 completado y guardado
‚òë tipoIdCreado tiene un valor (ej: 12)
‚òë Est√°s en Paso 2
‚òë Seleccionaste "Flujo Personalizado"
‚òë El diagrama muestra los 8 estados
‚òë window.estadosDisponibles tiene 8 elementos
‚òë No hay errores en consola F12
```

## üéÆ Ejemplo Pr√°ctico Completo

### Escenario: Certificado de Nomenclatura

```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
PASO 1: INFORMACI√ìN B√ÅSICA
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
C√≥digo: CERT-NOM-001
Nombre: Certificado de Nomenclatura
Slug: certificado-nomenclatura (auto)
Categor√≠a: üìÑ Certificados
√Årea: Planeaci√≥n
D√≠as: 5

[Siguiente ‚Üí]
  ‚Üì Se guarda con ID=15
  
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
PASO 2: FLUJOS DE APROBACI√ìN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Selecciono: ‚óã Flujo Personalizado
  ‚Üì
Se cargan 8 estados
  ‚Üì
Veo diagrama con los estados
  ‚Üì

[+ Nueva Transici√≥n]
  ‚Üì
Modal se abre
  ‚Üì

CONFIGURACI√ìN TRANSICI√ìN #1:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Origen: üìß Nueva
Destino: üë§ Asignada
Nombre: Asignar para Revisi√≥n
Bot√≥n: Asignar

Permisos:
‚òë Director OAPM
‚òë Coordinador del √Årea

Condiciones:
‚òë Requiere comentario

Acciones:
‚òë Enviar notificaciones

[Crear Transici√≥n]
  ‚Üì
POST /admin/api/configuracion/flujos-transiciones
  ‚Üì
‚úì Creada con ID=101
  ‚Üì
Modal se cierra
Diagrama se actualiza
Lista muestra: "1. Asignar para Revisi√≥n"
  ‚Üì

[+ Nueva Transici√≥n] (otra m√°s)
  ‚Üì

CONFIGURACI√ìN TRANSICI√ìN #2:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Origen: üë§ Asignada
Destino: ‚è≥ En Proceso
Nombre: Iniciar Trabajo
...
  ‚Üì
Etc...
  ‚Üì

Cuando termino de configurar:
[Siguiente ‚Üí]
  ‚Üì
Paso 3 del Wizard
```

## üîó Relaci√≥n con Base de Datos

### Tabla `tipos_solicitud`
```sql
INSERT INTO tipos_solicitud (
  codigo, nombre, slug, categoria_id, ...
) VALUES (
  'CERT-NOM-001', 'Certificado...', 'certificado...', 1, ...
);
-- Retorna ID = 15
```

### Tabla `transiciones_flujo`
```sql
INSERT INTO transiciones_flujo (
  tipo_solicitud_id,  -- 15 (vinculado al tipo)
  estado_origen_id,   -- 1 (Nueva)
  estado_destino_id,  -- 2 (Asignada)
  nombre,             -- "Asignar para Revisi√≥n"
  roles_permitidos,   -- ["Director OAPM", ...]
  ...
) VALUES (...);
```

## üéØ ¬øPara Qu√© Sirve?

Cuando un **ciudadano** cree una solicitud de tipo "Certificado de Nomenclatura":

```
1. Solicitud se crea en estado "Nueva"
   ‚Üì
2. Un Director ve la solicitud
   ‚Üì
3. Tiene bot√≥n "Asignar" (de la transici√≥n)
   ‚Üì
4. Click "Asignar"
   ‚îú‚îÄ Sistema verifica: ¬øEs Director? ‚úì
   ‚îú‚îÄ Sistema verifica: ¬øTiene comentario? ‚úì
   ‚îú‚îÄ Cambia estado a "Asignada"
   ‚îú‚îÄ Env√≠a notificaci√≥n
   ‚îî‚îÄ Registra en auditor√≠a
```

## üìä Ejemplo Visual del Flujo

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  üìß Nueva   ‚îÇ (INICIAL)
                    ‚îÇ  (Estado 1) ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                    Transici√≥n 1:
                    "Asignar"
                    Roles: Director, Coordinador
                    Condici√≥n: Requiere comentario
                           ‚îÇ
                           ‚Üì
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ üë§ Asignada  ‚îÇ
                    ‚îÇ  (Estado 2)  ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                    Transici√≥n 2:
                    "Iniciar Trabajo"
                    Roles: Funcionario Asignado
                           ‚îÇ
                           ‚Üì
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ ‚è≥ En Proceso ‚îÇ
                    ‚îÇ  (Estado 3)   ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                    Transici√≥n 3:
                    "Enviar a Revisi√≥n"
                    Roles: Funcionario
                           ‚îÇ
                           ‚Üì
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ üîç En Revisi√≥n ‚îÇ
                    ‚îÇ  (Estado 4)    ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ       ‚îÇ
            Transici√≥n 4 ‚îÇ       ‚îÇ Transici√≥n 5
            "Aprobar"    ‚îÇ       ‚îÇ "Rechazar"
            Roles: Dir   ‚îÇ       ‚îÇ Roles: Dir
                         ‚îÇ       ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ ‚úÖ     ‚îÇ  ‚îÇ ‚ùå        ‚îÇ
                    ‚îÇAprobada‚îÇ  ‚îÇRechazada  ‚îÇ
                    ‚îÇ(Final) ‚îÇ  ‚îÇ (Final)   ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üíª Datos en Consola

### Ver Estado Actual

```javascript
// Abre consola (F12) en Paso 2

// Ver estados cargados
console.log('Estados:', window.estadosDisponibles);
// Array(8) [{id: 1, nombre: "Nueva"}, ...]

// Ver transiciones creadas
console.log('Transiciones:', window.transicionesConfiguradas);
// Array(0) [] <- Vac√≠o si no has creado ninguna

// Ver ID del tipo en creaci√≥n
console.log('Tipo ID:', tipoIdCreado);
// 15 <- Debe tener un n√∫mero
```

## üéØ Resumen del Proceso

1. **PASO 1 del Wizard:** Crea el tipo (se guarda en BD)
2. **PASO 2 del Wizard:** Configura flujo
   - Si "B√°sico": No hace nada
   - Si "Personalizado": Crea transiciones
3. **Crear Transici√≥n:** Define reglas de paso entre estados
4. **Cada Transici√≥n tiene:**
   - ¬øDesde qu√© estado? (origen)
   - ¬øHasta qu√© estado? (destino)
   - ¬øQui√©n puede? (permisos)
   - ¬øQu√© se requiere? (condiciones)
   - ¬øQu√© pasa autom√°ticamente? (acciones)

---

**¬øNecesitas que revise algo espec√≠fico en tu pantalla o hay alg√∫n error en consola?**

Comp√°rteme:
1. Lo que ves en la consola (F12)
2. Si ves el diagrama con los estados
3. Qu√© pasa cuando haces click en "+ Nueva Transici√≥n"
